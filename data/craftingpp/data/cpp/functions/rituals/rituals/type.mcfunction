execute as @s[scores={cppWandLevel=1..3},nbt={Item:{id:"minecraft:book"}}] if block ~ ~-1 ~ dispenser{Items:[{Slot:0b,id:"minecraft:lapis_lazuli",Count:1b},{Slot:1b,id:"minecraft:experience_bottle",Count:16b},{Slot:2b,id:"minecraft:lapis_lazuli",Count:1b},{Slot:3b,id:"minecraft:experience_bottle",Count:16b},{Slot:5b,id:"minecraft:experience_bottle",Count:16b},{Slot:6b,id:"minecraft:lapis_lazuli",Count:1b},{Slot:7b,id:"minecraft:experience_bottle",Count:16b},{Slot:8b,id:"minecraft:lapis_lazuli",Count:1b}]} run function cpp:rituals/rituals/type_book_check
execute as @s[scores={cppWandLevel=2..3}] if data entity @s Item if block ~ ~-1 ~ dispenser{Items:[{Slot:0b,id:"minecraft:potion",Count:1b},{Slot:1b,id:"minecraft:experience_bottle",Count:16b},{Slot:2b,id:"minecraft:potion",Count:1b},{Slot:3b,id:"minecraft:experience_bottle",Count:16b},{Slot:5b,id:"minecraft:experience_bottle",Count:16b},{Slot:6b,id:"minecraft:potion",Count:1b},{Slot:7b,id:"minecraft:experience_bottle",Count:16b},{Slot:8b,id:"minecraft:potion",Count:1b}]} run function cpp:rituals/rituals/type_effect_check
execute as @s[scores={cppWandLevel=3}] if data entity @s Item if block ~ ~-1 ~ dispenser{Items:[{Slot:0b,id:"minecraft:gold_ingot",Count:1b},{Slot:2b,id:"minecraft:gold_ingot",Count:1b},{Slot:6b,id:"minecraft:gold_ingot",Count:1b},{Slot:8b,id:"minecraft:gold_ingot",Count:1b},{Slot:1b,id:"minecraft:experience_bottle",Count:16b},{Slot:3b,id:"minecraft:experience_bottle",Count:16b},{Slot:5b,id:"minecraft:experience_bottle",Count:16b},{Slot:7b,id:"minecraft:experience_bottle",Count:16b}]} run function cpp:rituals/rituals/type_attr_check
execute as @s[scores={cppWandLevel=16},nbt={Item:{tag:{id:"cpp:broken_spawner"}}}] if block ~ ~-1 ~ dispenser{Items:[{Slot:0b,tag:{id:"cpp:shard_of_the_darkness"},Count:1b},{Slot:1b,tag:{id:"cpp:shard_of_the_darkness"},Count:1b},{Slot:2b,tag:{id:"cpp:shard_of_the_darkness"},Count:1b},{Slot:3b,tag:{id:"cpp:shard_of_the_darkness"},Count:1b},{Slot:5b,tag:{id:"cpp:shard_of_the_darkness"},Count:1b},{Slot:6b,tag:{id:"cpp:shard_of_the_darkness"},Count:1b},{Slot:7b,tag:{id:"cpp:shard_of_the_darkness"},Count:1b},{Slot:8b,tag:{id:"cpp:shard_of_the_darkness"},Count:1b}]} run function cpp:rituals/rituals/type_spawner_check

execute as @s[tag=!cpp_ritual_work] run function cpp:rituals/rituals/fail
tag @s remove cpp_ritual_work
