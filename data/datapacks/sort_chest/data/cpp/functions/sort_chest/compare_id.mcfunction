summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:1b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:2b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:3b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:4b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:5b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:6b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:7b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:8b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:9b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:10b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:11b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:12b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:13b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:14b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:15b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:16b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:17b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:18b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:19b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:20b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:21b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:22b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:23b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:24b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:25b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:26b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}
summon armor_stand ~ -1 ~ {Invulnerable:1b,Invisible:1b,Small:1b,Marker:1b,NoGravity:1b,DisabledSlots:7967,ArmorItems:[{},{},{},{id:"minecraft:stone",Count:27b,tag:{store:"sth"}}],Tags:["cpp_sort_chest"]}

data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:1b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[0]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:2b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[1]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:3b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[2]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:4b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[3]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:5b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[4]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:6b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[5]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:7b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[6]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:8b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[7]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:9b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[8]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:10b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[9]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:11b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[10]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:12b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[11]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:13b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[12]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:14b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[13]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:15b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[14]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:16b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[15]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:17b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[16]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:18b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[17]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:19b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[18]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:20b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[19]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:21b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[20]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:22b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[21]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:23b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[22]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:24b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[23]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:25b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[24]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:26b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[25]
data modify entity @e[tag=cpp_sort_chest,nbt={ArmorItems:[{Count:27b}]},limit=1] ArmorItems[3].tag.store set from block ~ ~ ~ Items[26]

kill @e[type=armor_stand,tag=cpp_sort_chest,nbt={ArmorItems:[{},{},{},{tag:{store:"sth"}}]}]
scoreboard players set @e[tag=cpp_sort_chest] cppSortLen 0
execute as @e[tag=cpp_sort_chest] store result score @s cppSortLen run data get entity @s ArmorItems[3].tag.store.id
execute as @e[tag=cpp_sort_chest] run function cpp:sort_chest/alt
execute as @e[tag=cpp_sort_chest] run function cpp:sort_chest/count

data remove block ~ ~ ~ Items
execute as @e[tag=cpp_sort_chest] store result entity @s ArmorItems[3].tag.store.Slot byte 1 run scoreboard players get @s cppSortLenNew
execute as @e[tag=cpp_sort_chest] run data modify block ~ ~ ~ Items append from entity @s ArmorItems[3].tag.store

kill @e[tag=cpp_sort_chest]